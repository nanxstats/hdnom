<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>An Introduction to hdnom • hdnom</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="An Introduction to hdnom">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">hdnom</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">6.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/hdnom.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nanxstats/hdnom/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>An Introduction to hdnom</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nanxstats/hdnom/blob/master/vignettes/hdnom.Rmd" class="external-link"><code>vignettes/hdnom.Rmd</code></a></small>
      <div class="d-none name"><code>hdnom.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>It is a challenging task to model the emerging high-dimensional
clinical data with survival outcomes. For its simplicity and efficiency,
penalized Cox models are significantly useful for accomplishing such
tasks.</p>
<p><code>hdnom</code> streamlines the workflow of high-dimensional Cox
model building, nomogram plotting, model validation, calibration, and
comparison.</p>
</div>
<div class="section level2">
<h2 id="build-survival-models">Build survival models<a class="anchor" aria-label="anchor" href="#build-survival-models"></a>
</h2>
<p>To build a penalized Cox model with good predictive performance, some
parameter tuning is usually needed. For example, the elastic-net model
requires to tune the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mo>ℓ</mo><mn>1</mn></msub><annotation encoding="application/x-tex">\ell_1</annotation></semantics></math>-<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mo>ℓ</mo><mn>2</mn></msub><annotation encoding="application/x-tex">\ell_2</annotation></semantics></math>
penalty trade-off parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>,
and the regularization parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>.</p>
<p>To free the users from the tedious and error-prone parameter tuning
process, <code>hdnom</code> provides several functions for automatic
parameter tuning and model selection, including the following model
types:</p>
<table style="width:99%;" class="table">
<colgroup>
<col width="23%">
<col width="35%">
<col width="40%">
</colgroup>
<thead><tr class="header">
<th>Function name</th>
<th>Model type</th>
<th>Auto-tuned hyperparameters</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="../reference/fit_lasso.html">fit_lasso()</a></code></td>
<td>Lasso</td>
<td><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></td>
</tr>
<tr class="even">
<td><code><a href="../reference/fit_alasso.html">fit_alasso()</a></code></td>
<td>Adaptive lasso</td>
<td><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></td>
</tr>
<tr class="odd">
<td><code><a href="../reference/fit_enet.html">fit_enet()</a></code></td>
<td>Elastic-net</td>
<td>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
</td>
</tr>
<tr class="even">
<td><code><a href="../reference/fit_aenet.html">fit_aenet()</a></code></td>
<td>Adaptive elastic-net</td>
<td>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/fit_mcp.html">fit_mcp()</a></code></td>
<td>MCP</td>
<td>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>γ</mi><annotation encoding="application/x-tex">\gamma</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>
</td>
</tr>
<tr class="even">
<td><code><a href="../reference/fit_mnet.html">fit_mnet()</a></code></td>
<td>Mnet (MCP +
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mo>ℓ</mo><mn>2</mn></msub><annotation encoding="application/x-tex">\ell_2</annotation></semantics></math>)</td>
<td>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>γ</mi><annotation encoding="application/x-tex">\gamma</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/fit_scad.html">fit_scad()</a></code></td>
<td>SCAD</td>
<td>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>γ</mi><annotation encoding="application/x-tex">\gamma</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>
</td>
</tr>
<tr class="even">
<td><code><a href="../reference/fit_snet.html">fit_snet()</a></code></td>
<td>Snet (SCAD +
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mo>ℓ</mo><mn>2</mn></msub><annotation encoding="application/x-tex">\ell_2</annotation></semantics></math>)</td>
<td>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>γ</mi><annotation encoding="application/x-tex">\gamma</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/fit_flasso.html">fit_flasso()</a></code></td>
<td>Fused lasso</td>
<td>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>λ</mi><mn>1</mn></msub><annotation encoding="application/x-tex">\lambda_1</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>λ</mi><mn>2</mn></msub><annotation encoding="application/x-tex">\lambda_2</annotation></semantics></math>
</td>
</tr>
</tbody>
</table>
<p>In the next, we will use the imputed SMART study data to demonstrate
a complete process of model building, nomogram plotting, model
validation, calibration, and comparison with <code>hdnom</code>.</p>
<p>Load the packages and the <code>smart</code> dataset:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://nanx.me/hdnom/">"hdnom"</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"smart"</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">smart</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">time</span> <span class="op">&lt;-</span> <span class="va">smart</span><span class="op">$</span><span class="va">TEVENT</span></span>
<span><span class="va">event</span> <span class="op">&lt;-</span> <span class="va">smart</span><span class="op">$</span><span class="va">EVENT</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">event</span><span class="op">)</span></span></code></pre></div>
<p>The dataset contains 3873 observations with corresponding survival
outcome (<code>time</code>, <code>event</code>). 27 clinical variables
(<code>x</code>) are available as the predictors. See
<code><a href="../reference/smart.html">?smart</a></code> for a detailed explanation of the variables.</p>
<p>Fit a penalized Cox model by adaptive elastic-net regularization with
<code><a href="../reference/fit_aenet.html">fit_aenet()</a></code> and enable the parallel parameter tuning:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/RevolutionAnalytics/doparallel" class="external-link">"doParallel"</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/doParallel/man/registerDoParallel.html" class="external-link">registerDoParallel</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fit_aenet.html">fit_aenet</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, nfolds <span class="op">=</span> <span class="fl">10</span>, rule <span class="op">=</span> <span class="st">"lambda.1se"</span>, seed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "model"       "alpha"       "lambda"      "model_init"  "alpha_init" </span></span>
<span><span class="co">## [6] "lambda_init" "pen_factor"  "type"        "seed"        "call"  </span></span></code></pre>
<p>Adaptive elastic-net includes two estimation steps. The random seed
used for parameter tuning, the selected best
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>,
the selected best
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>,
the model fitted for each estimation step, and the penalty factor for
the model coefficients in the second estimation step are all stored in
the model object <code>fit</code>.</p>
</div>
<div class="section level2">
<h2 id="nomogram-visualization">Nomogram visualization<a class="anchor" aria-label="anchor" href="#nomogram-visualization"></a>
</h2>
<p>Before plotting the nomogram, we need to extract some necessary
information about the model: the model object and the selected
hyperparameters:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="va">fit</span><span class="op">$</span><span class="va">model</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="va">fit</span><span class="op">$</span><span class="va">alpha</span></span>
<span><span class="va">lambda</span> <span class="op">&lt;-</span> <span class="va">fit</span><span class="op">$</span><span class="va">lambda</span></span>
<span><span class="va">adapen</span> <span class="op">&lt;-</span> <span class="va">fit</span><span class="op">$</span><span class="va">pen_factor</span></span></code></pre></div>
<p>Let’s generate a nomogram object with <code><a href="../reference/as_nomogram.html">as_nomogram()</a></code> and
plot it:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_nomogram.html">as_nomogram</a></span><span class="op">(</span></span>
<span>  <span class="va">fit</span>, <span class="va">x</span>, <span class="va">time</span>, <span class="va">event</span>,</span>
<span>  pred.at <span class="op">=</span> <span class="fl">365</span> <span class="op">*</span> <span class="fl">2</span>,</span>
<span>  funlabel <span class="op">=</span> <span class="st">"2-Year Overall Survival Probability"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">nom</span><span class="op">)</span></span></code></pre></div>
<p><img src="hdnom_files/figure-html/unnamed-chunk-7-1.png" width="600" height="600" style="display: block; margin: auto;"></p>
<p>According to the nomogram, the adaptive elastic-net model selected 6
variables from the original set of 27 variables, effectively reduced the
model complexity.</p>
<p>Information about the nomogram itself, such as the point-linear
predictor unit mapping and total points-survival probability mapping,
can be viewed by printing the <code>nom</code> object directly.</p>
</div>
<div class="section level2">
<h2 id="model-validation">Model validation<a class="anchor" aria-label="anchor" href="#model-validation"></a>
</h2>
<p>It is a common practice to utilize resampling-based methods to
validate the predictive performance of a penalized Cox model. Bootstrap,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>-fold
cross-validation, and repeated
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>-fold
cross-validation are the most employed methods for such purpose.</p>
<p><code>hdnom</code> supports both internal model validation and
external model validation. Internal validation takes the dataset used to
build the model and evaluates the predictive performance on the data
internally with the above resampling-based methods, while external
validation evaluates the model’s predictive performance on a dataset
which is independent to the dataset used in model building.</p>
<div class="section level3">
<h3 id="internal-validation">Internal validation<a class="anchor" aria-label="anchor" href="#internal-validation"></a>
</h3>
<p><code><a href="../reference/validate.html">validate()</a></code> allows us to assess the model performance
internally by time-dependent AUC (Area Under the ROC Curve) with the
above three resampling methods.</p>
<p>Here, we validate the performance of the adaptive elastic-net model
with bootstrap resampling, at every half year from the first year to the
fifth year:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">val_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate.html">validate</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>, <span class="va">time</span>, <span class="va">event</span>,</span>
<span>  model.type <span class="op">=</span> <span class="st">"aenet"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="va">alpha</span>, lambda <span class="op">=</span> <span class="va">lambda</span>, pen.factor <span class="op">=</span> <span class="va">adapen</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"bootstrap"</span>, boot.times <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  tauc.type <span class="op">=</span> <span class="st">"UNO"</span>, tauc.time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">0.5</span><span class="op">)</span> <span class="op">*</span> <span class="fl">365</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">42</span>, trace <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">val_int</span><span class="op">)</span></span>
<span><span class="co">#&gt; High-Dimensional Cox Model Validation Object</span></span>
<span><span class="co">#&gt; Random seed: 42 </span></span>
<span><span class="co">#&gt; Validation method: bootstrap</span></span>
<span><span class="co">#&gt; Bootstrap samples: 10 </span></span>
<span><span class="co">#&gt; Model type: aenet </span></span>
<span><span class="co">#&gt; glmnet model alpha: 0.15 </span></span>
<span><span class="co">#&gt; glmnet model lambda: 0.4322461 </span></span>
<span><span class="co">#&gt; glmnet model penalty factor: specified</span></span>
<span><span class="co">#&gt; Time-dependent AUC type: UNO </span></span>
<span><span class="co">#&gt; Evaluation time points for tAUC: 365 547.5 730 912.5 1095 1277.5 1460 1642.5 1825</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">val_int</span><span class="op">)</span></span>
<span><span class="co">#&gt; Time-Dependent AUC Summary at Evaluation Time Points</span></span>
<span><span class="co">#&gt;                365     547.5       730     912.5      1095    1277.5      1460</span></span>
<span><span class="co">#&gt; Mean     0.6736908 0.6980663 0.6883938 0.6877201 0.7171392 0.7329408 0.6801665</span></span>
<span><span class="co">#&gt; Min      0.6702972 0.6943275 0.6852397 0.6838341 0.7104875 0.7275005 0.6713858</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6726018 0.6964805 0.6873354 0.6851884 0.7140499 0.7293569 0.6776290</span></span>
<span><span class="co">#&gt; Median   0.6740445 0.6983919 0.6879848 0.6884829 0.7163701 0.7321725 0.6799320</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.6749241 0.6996926 0.6896133 0.6896262 0.7210469 0.7371302 0.6825069</span></span>
<span><span class="co">#&gt; Max      0.6760826 0.7029078 0.6916850 0.6916987 0.7236970 0.7389818 0.6919914</span></span>
<span><span class="co">#&gt;             1642.5      1825</span></span>
<span><span class="co">#&gt; Mean     0.6841580 0.6935303</span></span>
<span><span class="co">#&gt; Min      0.6770945 0.6800316</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6821133 0.6924729</span></span>
<span><span class="co">#&gt; Median   0.6831368 0.6956285</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.6864527 0.6966638</span></span>
<span><span class="co">#&gt; Max      0.6939574 0.6997908</span></span></code></pre></div>
<p>The mean, median, 25%, and 75% quantiles of time-dependent AUC at
each time point across all bootstrap predictions are listed above. The
median and the mean can be considered as the bias-corrected estimation
of the model performance.</p>
<p>It is also possible to plot the model validation result:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">val_int</span><span class="op">)</span></span>
<span><span class="co">#&gt;                365     547.5       730     912.5      1095    1277.5      1460</span></span>
<span><span class="co">#&gt; Mean     0.6736908 0.6980663 0.6883938 0.6877201 0.7171392 0.7329408 0.6801665</span></span>
<span><span class="co">#&gt; Min      0.6702972 0.6943275 0.6852397 0.6838341 0.7104875 0.7275005 0.6713858</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6726018 0.6964805 0.6873354 0.6851884 0.7140499 0.7293569 0.6776290</span></span>
<span><span class="co">#&gt; Median   0.6740445 0.6983919 0.6879848 0.6884829 0.7163701 0.7321725 0.6799320</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.6749241 0.6996926 0.6896133 0.6896262 0.7210469 0.7371302 0.6825069</span></span>
<span><span class="co">#&gt; Max      0.6760826 0.7029078 0.6916850 0.6916987 0.7236970 0.7389818 0.6919914</span></span>
<span><span class="co">#&gt;             1642.5      1825</span></span>
<span><span class="co">#&gt; Mean     0.6841580 0.6935303</span></span>
<span><span class="co">#&gt; Min      0.6770945 0.6800316</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6821133 0.6924729</span></span>
<span><span class="co">#&gt; Median   0.6831368 0.6956285</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.6864527 0.6966638</span></span>
<span><span class="co">#&gt; Max      0.6939574 0.6997908</span></span></code></pre></div>
<p><img src="hdnom_files/figure-html/unnamed-chunk-9-1.png" width="500" height="500" style="display: block; margin: auto;"></p>
<p>The solid line represents the mean of the AUC, the dashed line
represents the median of the AUC. The darker interval in the plot shows
the 25% and 75% quantiles of AUC, the lighter interval shows the minimum
and maximum of AUC.</p>
<p>It seems that the bootstrap-based validation result is stable: the
median and the mean value at each evaluation time point are close; the
25% and 75% quantiles are also close to the median at each time
point.</p>
<p>Bootstrap-based validation often gives relatively stable results.
Many of the established nomograms in clinical oncology research are
validated by bootstrap methods.
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>K</mi><annotation encoding="application/x-tex">K</annotation></semantics></math>-fold
cross-validation provides a more strict evaluation scheme than
bootstrap. Repeated cross-validation gives similar results as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>-fold
cross-validation, and usually more robust. These two methods are more
applied by the machine learning community. Check
<code><a href="../reference/validate.html">?hdnom::validate</a></code> for more examples about internal model
validation.</p>
</div>
<div class="section level3">
<h3 id="external-validation">External validation<a class="anchor" aria-label="anchor" href="#external-validation"></a>
</h3>
<p>Now we have the internally validated model. To perform external
validation, we usually need an independent dataset (preferably,
collected in other studies), which has the same variables as the dataset
used to build the model. For penalized Cox models, the external dataset
should have at least the same variables that have been selected in the
model.</p>
<p>For demonstration purposes, here we draw 1000 samples from the
<code>smart</code> data and <em>assume</em> that they form an external
validation dataset, then use <code><a href="../reference/validate_external.html">validate_external()</a></code> to perform
external validation:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">smart</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="fl">1001</span><span class="op">:</span><span class="fl">2000</span>, <span class="op">]</span></span>
<span><span class="va">time_new</span> <span class="op">&lt;-</span> <span class="va">smart</span><span class="op">$</span><span class="va">TEVENT</span><span class="op">[</span><span class="fl">1001</span><span class="op">:</span><span class="fl">2000</span><span class="op">]</span></span>
<span><span class="va">event_new</span> <span class="op">&lt;-</span> <span class="va">smart</span><span class="op">$</span><span class="va">EVENT</span><span class="op">[</span><span class="fl">1001</span><span class="op">:</span><span class="fl">2000</span><span class="op">]</span></span>
<span></span>
<span><span class="va">val_ext</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_external.html">validate_external</a></span><span class="op">(</span></span>
<span>  <span class="va">fit</span>, <span class="va">x</span>, <span class="va">time</span>, <span class="va">event</span>,</span>
<span>  <span class="va">x_new</span>, <span class="va">time_new</span>, <span class="va">event_new</span>,</span>
<span>  tauc.type <span class="op">=</span> <span class="st">"UNO"</span>,</span>
<span>  tauc.time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">2</span>, <span class="fl">0.25</span><span class="op">)</span> <span class="op">*</span> <span class="fl">365</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">val_ext</span><span class="op">)</span></span>
<span><span class="co">#&gt; High-Dimensional Cox Model External Validation Object</span></span>
<span><span class="co">#&gt; Model type: aenet </span></span>
<span><span class="co">#&gt; Time-dependent AUC type: UNO </span></span>
<span><span class="co">#&gt; Evaluation time points for tAUC: 91.25 182.5 273.75 365 456.25 547.5 638.75 730</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">val_ext</span><span class="op">)</span></span>
<span><span class="co">#&gt; Time-Dependent AUC Summary at Evaluation Time Points</span></span>
<span><span class="co">#&gt;         91.25     182.5    273.75       365    456.25     547.5   638.75</span></span>
<span><span class="co">#&gt; AUC 0.4328909 0.5713055 0.6371661 0.6351403 0.6575692 0.6768453 0.683239</span></span>
<span><span class="co">#&gt;           730</span></span>
<span><span class="co">#&gt; AUC 0.6956754</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">val_ext</span><span class="op">)</span></span>
<span><span class="co">#&gt;         91.25     182.5    273.75       365    456.25     547.5   638.75</span></span>
<span><span class="co">#&gt; AUC 0.4328909 0.5713055 0.6371661 0.6351403 0.6575692 0.6768453 0.683239</span></span>
<span><span class="co">#&gt;           730</span></span>
<span><span class="co">#&gt; AUC 0.6956754</span></span></code></pre></div>
<p><img src="hdnom_files/figure-html/unnamed-chunk-10-1.png" width="500" height="500" style="display: block; margin: auto;"></p>
<p>The time-dependent AUC on the external dataset is shown above.</p>
</div>
</div>
<div class="section level2">
<h2 id="model-calibration">Model calibration<a class="anchor" aria-label="anchor" href="#model-calibration"></a>
</h2>
<p>Measuring how far the model predictions are from actual survival
outcomes is known as <em>calibration</em>. Calibration can be assessed
by plotting the predicted probabilities from the model versus actual
survival probabilities. Similar to model validation, both internal model
calibration and external model calibration are supported in
<code>hdnom</code>.</p>
<div class="section level3">
<h3 id="internal-calibration">Internal calibration<a class="anchor" aria-label="anchor" href="#internal-calibration"></a>
</h3>
<p><code><a href="../reference/calibrate.html">calibrate()</a></code> provides non-resampling and resampling
methods for internal model calibration, including direct fitting,
bootstrap resampling,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>-fold
cross-validation, and repeated cross-validation.</p>
<p>For example, to calibrate the model internally with the bootstrap
method:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cal_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calibrate.html">calibrate</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>, <span class="va">time</span>, <span class="va">event</span>,</span>
<span>  model.type <span class="op">=</span> <span class="st">"aenet"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="va">alpha</span>, lambda <span class="op">=</span> <span class="va">lambda</span>, pen.factor <span class="op">=</span> <span class="va">adapen</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"bootstrap"</span>, boot.times <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  pred.at <span class="op">=</span> <span class="fl">365</span> <span class="op">*</span> <span class="fl">5</span>, ngroup <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">42</span>, trace <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cal_int</span><span class="op">)</span></span>
<span><span class="co">#&gt; High-Dimensional Cox Model Calibration Object</span></span>
<span><span class="co">#&gt; Random seed: 42 </span></span>
<span><span class="co">#&gt; Calibration method: bootstrap</span></span>
<span><span class="co">#&gt; Bootstrap samples: 10 </span></span>
<span><span class="co">#&gt; Model type: aenet </span></span>
<span><span class="co">#&gt; glmnet model alpha: 0.15 </span></span>
<span><span class="co">#&gt; glmnet model lambda: 0.4322461 </span></span>
<span><span class="co">#&gt; glmnet model penalty factor: specified</span></span>
<span><span class="co">#&gt; Calibration time point: 1825 </span></span>
<span><span class="co">#&gt; Number of groups formed for calibration: 3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cal_int</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Calibration Summary Table</span></span>
<span><span class="co">#&gt;   Predicted  Observed Lower 95% Upper 95%</span></span>
<span><span class="co">#&gt; 1 0.7937694 0.7556172 0.7275288 0.7847901</span></span>
<span><span class="co">#&gt; 2 0.8940039 0.8956157 0.8744876 0.9172544</span></span>
<span><span class="co">#&gt; 3 0.9376169 0.9424155 0.9256913 0.9594419</span></span></code></pre></div>
<p>We split the samples into three risk groups. In practice, the number
of risk groups is decided by the users according to their needs.</p>
<p>The model calibration results (the median of the predicted survival
probability; the median of the observed survival probability estimated
by Kaplan-Meier method with 95% CI) are summarized as above.</p>
<p>Plot the calibration result:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cal_int</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="hdnom_files/figure-html/unnamed-chunk-12-1.png" width="500" height="500" style="display: block; margin: auto;"></p>
<p>In practice, you may want to perform calibration for multiple time
points separately, and put the plots together in one figure. See
<code><a href="../reference/calibrate.html">?hdnom::calibrate</a></code> for more examples about internal model
calibration.</p>
</div>
<div class="section level3">
<h3 id="external-calibration">External calibration<a class="anchor" aria-label="anchor" href="#external-calibration"></a>
</h3>
<p>To perform external calibration with an external dataset, use
<code><a href="../reference/calibrate_external.html">calibrate_external()</a></code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cal_ext</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calibrate_external.html">calibrate_external</a></span><span class="op">(</span></span>
<span>  <span class="va">fit</span>, <span class="va">x</span>, <span class="va">time</span>, <span class="va">event</span>,</span>
<span>  <span class="va">x_new</span>, <span class="va">time_new</span>, <span class="va">event_new</span>,</span>
<span>  pred.at <span class="op">=</span> <span class="fl">365</span> <span class="op">*</span> <span class="fl">5</span>, ngroup <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cal_ext</span><span class="op">)</span></span>
<span><span class="co">#&gt; High-Dimensional Cox Model External Calibration Object</span></span>
<span><span class="co">#&gt; Model type: aenet </span></span>
<span><span class="co">#&gt; Calibration time point: 1825 </span></span>
<span><span class="co">#&gt; Number of groups formed for calibration: 3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cal_ext</span><span class="op">)</span></span>
<span><span class="co">#&gt;   External Calibration Summary Table</span></span>
<span><span class="co">#&gt;   Predicted  Observed Lower 95% Upper 95%</span></span>
<span><span class="co">#&gt; 1 0.7937879 0.7471369 0.6991861 0.7983762</span></span>
<span><span class="co">#&gt; 2 0.8917521 0.8727998 0.8363680 0.9108185</span></span>
<span><span class="co">#&gt; 3 0.9214463 0.9387588 0.9122184 0.9660715</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cal_ext</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="hdnom_files/figure-html/unnamed-chunk-13-1.png" width="500" height="500" style="display: block; margin: auto;"></p>
<p>The external calibration results have the similar interpretations as
the internal calibration results, except the fact that external
calibration is performed on the external dataset.</p>
</div>
<div class="section level3">
<h3 id="kaplan-meier-analysis-for-risk-groups">Kaplan-Meier analysis for risk groups<a class="anchor" aria-label="anchor" href="#kaplan-meier-analysis-for-risk-groups"></a>
</h3>
<p>Internal calibration and external calibration both classify the
testing set into different risk groups. For internal calibration, the
testing set means all the samples in the dataset that was used to build
the model, for external calibration, the testing set means the samples
from the external dataset.</p>
<p>We can further analyze the differences in survival time for different
risk groups with Kaplan-Meier survival curves and a number at risk
table. For example, here we plot the Kaplan-Meier survival curves and
evaluate the number at risk from one year to six years for the three
risk groups, with the function <code><a href="../reference/kmplot.html">kmplot()</a></code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/kmplot.html">kmplot</a></span><span class="op">(</span></span>
<span>  <span class="va">cal_int</span>,</span>
<span>  group.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"High risk"</span>, <span class="st">"Medium risk"</span>, <span class="st">"Low risk"</span><span class="op">)</span>,</span>
<span>  time.at <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span> <span class="op">*</span> <span class="fl">365</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="hdnom_files/figure-html/unnamed-chunk-14-1.png" width="600" height="400" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/kmplot.html">kmplot</a></span><span class="op">(</span></span>
<span>  <span class="va">cal_ext</span>,</span>
<span>  group.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"High risk"</span>, <span class="st">"Medium risk"</span>, <span class="st">"Low risk"</span><span class="op">)</span>,</span>
<span>  time.at <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span> <span class="op">*</span> <span class="fl">365</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="hdnom_files/figure-html/unnamed-chunk-14-2.png" width="600" height="400" style="display: block; margin: auto;"></p>
<p>The
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math>-value
of the log-rank test is also shown in the plot.</p>
</div>
<div class="section level3">
<h3 id="log-rank-test-for-risk-groups">Log-rank test for risk groups<a class="anchor" aria-label="anchor" href="#log-rank-test-for-risk-groups"></a>
</h3>
<p>To compare the differences between the survival curves, log-rank test
is often applied. <code><a href="../reference/logrank_test.html">logrank_test()</a></code> performs such tests on the
internal calibration and external calibration results:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cal_int_logrank</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/logrank_test.html">logrank_test</a></span><span class="op">(</span><span class="va">cal_int</span><span class="op">)</span></span>
<span><span class="va">cal_int_logrank</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; survdiff(formula = formula("Surv(time, event) ~ grp"))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; n=3872, 1 observation deleted due to missingness.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;          N Observed Expected (O-E)^2/E (O-E)^2/V</span></span>
<span><span class="co">#&gt; grp=1 1290      291      156     117.9     178.5</span></span>
<span><span class="co">#&gt; grp=2 1291      112      157      12.7      19.4</span></span>
<span><span class="co">#&gt; grp=3 1291       56      147      56.1      82.7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Chisq= 187  on 2 degrees of freedom, p= &lt;2e-16</span></span>
<span><span class="va">cal_int_logrank</span><span class="op">$</span><span class="va">pval</span></span>
<span><span class="co">#&gt; [1] 2.532113e-41</span></span>
<span></span>
<span><span class="va">cal_ext_logrank</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/logrank_test.html">logrank_test</a></span><span class="op">(</span><span class="va">cal_ext</span><span class="op">)</span></span>
<span><span class="va">cal_ext_logrank</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; survdiff(formula = formula("Surv(time, event) ~ grp"))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; n=999, 1 observation deleted due to missingness.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         N Observed Expected (O-E)^2/E (O-E)^2/V</span></span>
<span><span class="co">#&gt; grp=1 333       83     45.0     32.14      46.5</span></span>
<span><span class="co">#&gt; grp=2 333       40     49.8      1.92       2.9</span></span>
<span><span class="co">#&gt; grp=3 333       24     52.3     15.28      23.7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Chisq= 49.5  on 2 degrees of freedom, p= 2e-11</span></span>
<span><span class="va">cal_ext_logrank</span><span class="op">$</span><span class="va">pval</span></span>
<span><span class="co">#&gt; [1] 1.761037e-11</span></span></code></pre></div>
<p>The exact
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math>-values
for log-rank tests are stored as <code>cal_int_logrank$pval</code> and
<code>cal_ext_logrank$pval</code>. Here
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>&lt;</mo><mn>0.001</mn></mrow><annotation encoding="application/x-tex">p &lt; 0.001</annotation></semantics></math>
indicates significant differences between the survival curves for
different risk groups.</p>
</div>
</div>
<div class="section level2">
<h2 id="model-comparison">Model comparison<a class="anchor" aria-label="anchor" href="#model-comparison"></a>
</h2>
<p>Given all the available model types, it is a natural question to ask:
which type of model performs the best for my data? Such questions about
model type selection can be answered by built-in model comparison
functions in <code>hdnom</code>.</p>
<div class="section level3">
<h3 id="model-comparison-by-validation">Model comparison by validation<a class="anchor" aria-label="anchor" href="#model-comparison-by-validation"></a>
</h3>
<p>We can compare the model performance using time-dependent AUC by the
same (internal) model validation approach as before. For example, here
we compare lasso and adaptive lasso by 5-fold cross-validation:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cmp_val</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compare_by_validate.html">compare_by_validate</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>, <span class="va">time</span>, <span class="va">event</span>,</span>
<span>  model.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lasso"</span>, <span class="st">"alasso"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"cv"</span>, nfolds <span class="op">=</span> <span class="fl">5</span>, tauc.type <span class="op">=</span> <span class="st">"UNO"</span>,</span>
<span>  tauc.time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">2</span>, <span class="fl">0.25</span><span class="op">)</span> <span class="op">*</span> <span class="fl">365</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">42</span>, trace <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cmp_val</span><span class="op">)</span></span>
<span><span class="co">#&gt; High-Dimensional Cox Model Validation Object</span></span>
<span><span class="co">#&gt; Random seed: 42 </span></span>
<span><span class="co">#&gt; Validation method: k-fold cross-validation</span></span>
<span><span class="co">#&gt; Cross-validation folds: 5 </span></span>
<span><span class="co">#&gt; Model type: lasso </span></span>
<span><span class="co">#&gt; glmnet model alpha: 1 </span></span>
<span><span class="co">#&gt; glmnet model lambda: 0.01117274 </span></span>
<span><span class="co">#&gt; glmnet model penalty factor: not specified</span></span>
<span><span class="co">#&gt; Time-dependent AUC type: UNO </span></span>
<span><span class="co">#&gt; Evaluation time points for tAUC: 91.25 182.5 273.75 365 456.25 547.5 638.75 730</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; High-Dimensional Cox Model Validation Object</span></span>
<span><span class="co">#&gt; Random seed: 42 </span></span>
<span><span class="co">#&gt; Validation method: k-fold cross-validation</span></span>
<span><span class="co">#&gt; Cross-validation folds: 5 </span></span>
<span><span class="co">#&gt; Model type: alasso </span></span>
<span><span class="co">#&gt; glmnet model alpha: 1 </span></span>
<span><span class="co">#&gt; glmnet model lambda: 0.04226386 </span></span>
<span><span class="co">#&gt; glmnet model penalty factor: specified</span></span>
<span><span class="co">#&gt; Time-dependent AUC type: UNO </span></span>
<span><span class="co">#&gt; Evaluation time points for tAUC: 91.25 182.5 273.75 365 456.25 547.5 638.75 730</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cmp_val</span><span class="op">)</span></span>
<span><span class="co">#&gt; Model type: lasso </span></span>
<span><span class="co">#&gt;              91.25     182.5    273.75       365    456.25     547.5    638.75</span></span>
<span><span class="co">#&gt; Mean     0.4862766 0.6235047 0.6554862 0.6645661 0.6709065 0.6905955 0.6859931</span></span>
<span><span class="co">#&gt; Min      0.2039134 0.5628978 0.6125746 0.6259622 0.6288554 0.6480062 0.6258751</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.4868413 0.6095040 0.6296803 0.6518906 0.6636125 0.6740643 0.6677914</span></span>
<span><span class="co">#&gt; Median   0.5470612 0.6207525 0.6669674 0.6753767 0.6780298 0.6956816 0.7034205</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.5840546 0.6536918 0.6724515 0.6765498 0.6818180 0.6959422 0.7126816</span></span>
<span><span class="co">#&gt; Max      0.6095124 0.6706775 0.6957573 0.6930510 0.7022166 0.7392832 0.7201967</span></span>
<span><span class="co">#&gt;                730</span></span>
<span><span class="co">#&gt; Mean     0.6789647</span></span>
<span><span class="co">#&gt; Min      0.6251706</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6258098</span></span>
<span><span class="co">#&gt; Median   0.6935016</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.7180132</span></span>
<span><span class="co">#&gt; Max      0.7323283</span></span>
<span><span class="co">#&gt;              91.25     182.5    273.75       365    456.25     547.5    638.75</span></span>
<span><span class="co">#&gt; Mean     0.4862766 0.6235047 0.6554862 0.6645661 0.6709065 0.6905955 0.6859931</span></span>
<span><span class="co">#&gt; Min      0.2039134 0.5628978 0.6125746 0.6259622 0.6288554 0.6480062 0.6258751</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.4868413 0.6095040 0.6296803 0.6518906 0.6636125 0.6740643 0.6677914</span></span>
<span><span class="co">#&gt; Median   0.5470612 0.6207525 0.6669674 0.6753767 0.6780298 0.6956816 0.7034205</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.5840546 0.6536918 0.6724515 0.6765498 0.6818180 0.6959422 0.7126816</span></span>
<span><span class="co">#&gt; Max      0.6095124 0.6706775 0.6957573 0.6930510 0.7022166 0.7392832 0.7201967</span></span>
<span><span class="co">#&gt;                730</span></span>
<span><span class="co">#&gt; Mean     0.6789647</span></span>
<span><span class="co">#&gt; Min      0.6251706</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6258098</span></span>
<span><span class="co">#&gt; Median   0.6935016</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.7180132</span></span>
<span><span class="co">#&gt; Max      0.7323283</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model type: alasso </span></span>
<span><span class="co">#&gt;              91.25     182.5    273.75       365    456.25     547.5    638.75</span></span>
<span><span class="co">#&gt; Mean     0.4814586 0.6106500 0.6475280 0.6612647 0.6675871 0.6834418 0.6813224</span></span>
<span><span class="co">#&gt; Min      0.2479919 0.5538453 0.6009056 0.6208453 0.6310650 0.6504086 0.6354844</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.4747967 0.5918396 0.6394882 0.6539436 0.6509640 0.6548892 0.6608927</span></span>
<span><span class="co">#&gt; Median   0.5320552 0.6000809 0.6534756 0.6651832 0.6601551 0.6643520 0.6634682</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.5755143 0.6290886 0.6546811 0.6665424 0.6841356 0.6999959 0.7108894</span></span>
<span><span class="co">#&gt; Max      0.5769350 0.6783959 0.6890896 0.6998091 0.7116160 0.7475634 0.7358773</span></span>
<span><span class="co">#&gt;                730</span></span>
<span><span class="co">#&gt; Mean     0.6774869</span></span>
<span><span class="co">#&gt; Min      0.6340813</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6386258</span></span>
<span><span class="co">#&gt; Median   0.6791506</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.6995719</span></span>
<span><span class="co">#&gt; Max      0.7360047</span></span>
<span><span class="co">#&gt;              91.25     182.5    273.75       365    456.25     547.5    638.75</span></span>
<span><span class="co">#&gt; Mean     0.4814586 0.6106500 0.6475280 0.6612647 0.6675871 0.6834418 0.6813224</span></span>
<span><span class="co">#&gt; Min      0.2479919 0.5538453 0.6009056 0.6208453 0.6310650 0.6504086 0.6354844</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.4747967 0.5918396 0.6394882 0.6539436 0.6509640 0.6548892 0.6608927</span></span>
<span><span class="co">#&gt; Median   0.5320552 0.6000809 0.6534756 0.6651832 0.6601551 0.6643520 0.6634682</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.5755143 0.6290886 0.6546811 0.6665424 0.6841356 0.6999959 0.7108894</span></span>
<span><span class="co">#&gt; Max      0.5769350 0.6783959 0.6890896 0.6998091 0.7116160 0.7475634 0.7358773</span></span>
<span><span class="co">#&gt;                730</span></span>
<span><span class="co">#&gt; Mean     0.6774869</span></span>
<span><span class="co">#&gt; Min      0.6340813</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6386258</span></span>
<span><span class="co">#&gt; Median   0.6791506</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.6995719</span></span>
<span><span class="co">#&gt; Max      0.7360047</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cmp_val</span><span class="op">)</span></span>
<span><span class="co">#&gt;              91.25     182.5    273.75       365    456.25     547.5    638.75</span></span>
<span><span class="co">#&gt; Mean     0.4862766 0.6235047 0.6554862 0.6645661 0.6709065 0.6905955 0.6859931</span></span>
<span><span class="co">#&gt; Min      0.2039134 0.5628978 0.6125746 0.6259622 0.6288554 0.6480062 0.6258751</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.4868413 0.6095040 0.6296803 0.6518906 0.6636125 0.6740643 0.6677914</span></span>
<span><span class="co">#&gt; Median   0.5470612 0.6207525 0.6669674 0.6753767 0.6780298 0.6956816 0.7034205</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.5840546 0.6536918 0.6724515 0.6765498 0.6818180 0.6959422 0.7126816</span></span>
<span><span class="co">#&gt; Max      0.6095124 0.6706775 0.6957573 0.6930510 0.7022166 0.7392832 0.7201967</span></span>
<span><span class="co">#&gt;                730</span></span>
<span><span class="co">#&gt; Mean     0.6789647</span></span>
<span><span class="co">#&gt; Min      0.6251706</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6258098</span></span>
<span><span class="co">#&gt; Median   0.6935016</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.7180132</span></span>
<span><span class="co">#&gt; Max      0.7323283</span></span>
<span><span class="co">#&gt;              91.25     182.5    273.75       365    456.25     547.5    638.75</span></span>
<span><span class="co">#&gt; Mean     0.4814586 0.6106500 0.6475280 0.6612647 0.6675871 0.6834418 0.6813224</span></span>
<span><span class="co">#&gt; Min      0.2479919 0.5538453 0.6009056 0.6208453 0.6310650 0.6504086 0.6354844</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.4747967 0.5918396 0.6394882 0.6539436 0.6509640 0.6548892 0.6608927</span></span>
<span><span class="co">#&gt; Median   0.5320552 0.6000809 0.6534756 0.6651832 0.6601551 0.6643520 0.6634682</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.5755143 0.6290886 0.6546811 0.6665424 0.6841356 0.6999959 0.7108894</span></span>
<span><span class="co">#&gt; Max      0.5769350 0.6783959 0.6890896 0.6998091 0.7116160 0.7475634 0.7358773</span></span>
<span><span class="co">#&gt;                730</span></span>
<span><span class="co">#&gt; Mean     0.6774869</span></span>
<span><span class="co">#&gt; Min      0.6340813</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6386258</span></span>
<span><span class="co">#&gt; Median   0.6791506</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.6995719</span></span>
<span><span class="co">#&gt; Max      0.7360047</span></span></code></pre></div>
<p><img src="hdnom_files/figure-html/unnamed-chunk-16-1.png" width="600" height="480" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cmp_val</span>, interval <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;              91.25     182.5    273.75       365    456.25     547.5    638.75</span></span>
<span><span class="co">#&gt; Mean     0.4862766 0.6235047 0.6554862 0.6645661 0.6709065 0.6905955 0.6859931</span></span>
<span><span class="co">#&gt; Min      0.2039134 0.5628978 0.6125746 0.6259622 0.6288554 0.6480062 0.6258751</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.4868413 0.6095040 0.6296803 0.6518906 0.6636125 0.6740643 0.6677914</span></span>
<span><span class="co">#&gt; Median   0.5470612 0.6207525 0.6669674 0.6753767 0.6780298 0.6956816 0.7034205</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.5840546 0.6536918 0.6724515 0.6765498 0.6818180 0.6959422 0.7126816</span></span>
<span><span class="co">#&gt; Max      0.6095124 0.6706775 0.6957573 0.6930510 0.7022166 0.7392832 0.7201967</span></span>
<span><span class="co">#&gt;                730</span></span>
<span><span class="co">#&gt; Mean     0.6789647</span></span>
<span><span class="co">#&gt; Min      0.6251706</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6258098</span></span>
<span><span class="co">#&gt; Median   0.6935016</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.7180132</span></span>
<span><span class="co">#&gt; Max      0.7323283</span></span>
<span><span class="co">#&gt;              91.25     182.5    273.75       365    456.25     547.5    638.75</span></span>
<span><span class="co">#&gt; Mean     0.4814586 0.6106500 0.6475280 0.6612647 0.6675871 0.6834418 0.6813224</span></span>
<span><span class="co">#&gt; Min      0.2479919 0.5538453 0.6009056 0.6208453 0.6310650 0.6504086 0.6354844</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.4747967 0.5918396 0.6394882 0.6539436 0.6509640 0.6548892 0.6608927</span></span>
<span><span class="co">#&gt; Median   0.5320552 0.6000809 0.6534756 0.6651832 0.6601551 0.6643520 0.6634682</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.5755143 0.6290886 0.6546811 0.6665424 0.6841356 0.6999959 0.7108894</span></span>
<span><span class="co">#&gt; Max      0.5769350 0.6783959 0.6890896 0.6998091 0.7116160 0.7475634 0.7358773</span></span>
<span><span class="co">#&gt;                730</span></span>
<span><span class="co">#&gt; Mean     0.6774869</span></span>
<span><span class="co">#&gt; Min      0.6340813</span></span>
<span><span class="co">#&gt; 0.25 Qt. 0.6386258</span></span>
<span><span class="co">#&gt; Median   0.6791506</span></span>
<span><span class="co">#&gt; 0.75 Qt. 0.6995719</span></span>
<span><span class="co">#&gt; Max      0.7360047</span></span></code></pre></div>
<p><img src="hdnom_files/figure-html/unnamed-chunk-16-2.png" width="600" height="480" style="display: block; margin: auto;"></p>
<p>The solid line, dashed line and intervals have the same
interpretation as above. For this comparison, there seems to be no
substantial difference (AUC difference
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mn>5</mn><mi>%</mi></mrow><annotation encoding="application/x-tex">&lt; 5\%</annotation></semantics></math>)
between lasso and adaptive lasso in predictive performance, although
lasso performs slightly better than adaptive lasso for the first three
time points, adaptive lasso performs slightly better than lasso for the
last few time points.</p>
<p>The model comparison functions in <code>hdnom</code> have a minimal
input design so you do not have to set the parameters for each model
type manually. The functions will try to determine the best parameter
settings automatically for each model type to achieve the best
performance.</p>
</div>
<div class="section level3">
<h3 id="model-comparison-by-calibration">Model comparison by calibration<a class="anchor" aria-label="anchor" href="#model-comparison-by-calibration"></a>
</h3>
<p>We can compare the models by comparing their (internal) model
calibration performance. To continue the example, we split the samples
into five risk groups, and compare lasso to adaptive lasso via
calibration:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cmp_cal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compare_by_calibrate.html">compare_by_calibrate</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>, <span class="va">time</span>, <span class="va">event</span>,</span>
<span>  model.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lasso"</span>, <span class="st">"alasso"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"cv"</span>, nfolds <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  pred.at <span class="op">=</span> <span class="fl">365</span> <span class="op">*</span> <span class="fl">9</span>, ngroup <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">42</span>, trace <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cmp_cal</span><span class="op">)</span></span>
<span><span class="co">#&gt; High-Dimensional Cox Model Calibration Object</span></span>
<span><span class="co">#&gt; Random seed: 42 </span></span>
<span><span class="co">#&gt; Calibration method: k-fold cross-validation</span></span>
<span><span class="co">#&gt; Cross-validation folds: 5 </span></span>
<span><span class="co">#&gt; Model type: lasso </span></span>
<span><span class="co">#&gt; glmnet model alpha: 1 </span></span>
<span><span class="co">#&gt; glmnet model lambda: 0.01117274 </span></span>
<span><span class="co">#&gt; glmnet model penalty factor: not specified</span></span>
<span><span class="co">#&gt; Calibration time point: 3285 </span></span>
<span><span class="co">#&gt; Number of groups formed for calibration: 5 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; High-Dimensional Cox Model Calibration Object</span></span>
<span><span class="co">#&gt; Random seed: 42 </span></span>
<span><span class="co">#&gt; Calibration method: k-fold cross-validation</span></span>
<span><span class="co">#&gt; Cross-validation folds: 5 </span></span>
<span><span class="co">#&gt; Model type: alasso </span></span>
<span><span class="co">#&gt; glmnet model alpha: 1 </span></span>
<span><span class="co">#&gt; glmnet model lambda: 0.04226386 </span></span>
<span><span class="co">#&gt; glmnet model penalty factor: specified</span></span>
<span><span class="co">#&gt; Calibration time point: 3285 </span></span>
<span><span class="co">#&gt; Number of groups formed for calibration: 5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cmp_cal</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Model type: lasso </span></span>
<span><span class="co">#&gt;   Calibration Summary Table</span></span>
<span><span class="co">#&gt;   Predicted  Observed Lower 95% Upper 95%</span></span>
<span><span class="co">#&gt; 1 0.5697146 0.4934145 0.4240717 0.5740960</span></span>
<span><span class="co">#&gt; 2 0.7049550 0.6934715 0.5838120 0.8237287</span></span>
<span><span class="co">#&gt; 3 0.7667393 0.7894857 0.7203442 0.8652637</span></span>
<span><span class="co">#&gt; 4 0.8124527 0.8658548 0.7886324 0.9506387</span></span>
<span><span class="co">#&gt; 5 0.8571816 0.8858418 0.8476030 0.9258058</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Model type: alasso </span></span>
<span><span class="co">#&gt;   Calibration Summary Table</span></span>
<span><span class="co">#&gt;   Predicted  Observed Lower 95% Upper 95%</span></span>
<span><span class="co">#&gt; 1 0.5477459 0.4881734 0.4120040 0.5784246</span></span>
<span><span class="co">#&gt; 2 0.7193159 0.7164990 0.6459081 0.7948047</span></span>
<span><span class="co">#&gt; 3 0.7928640 0.8172891 0.7657546 0.8722919</span></span>
<span><span class="co">#&gt; 4 0.8368744 0.8430378 0.7511746 0.9461351</span></span>
<span><span class="co">#&gt; 5 0.8786381 0.8926692 0.8524805 0.9347526</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cmp_cal</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">1</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="hdnom_files/figure-html/unnamed-chunk-17-1.png" width="600" height="480" style="display: block; margin: auto;"></p>
<p>The summary output and the plot show the calibration results for each
model type we want to compare. Lasso and adaptive lasso have comparable
performance in this case, since their predicted overall survival
probabilities are both close to the observed survival probabilities in a
similar degree. Adaptive lasso seems to be slightly more stable than
lasso in calibration.</p>
</div>
</div>
<div class="section level2">
<h2 id="prediction-on-new-data">Prediction on new data<a class="anchor" aria-label="anchor" href="#prediction-on-new-data"></a>
</h2>
<p>To predict the overall survival probability on certain time points
for new samples with the established models, simply use
<code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> on the model objects and the new data.</p>
<p>As an example, we will use the samples numbered from 101 to 105 in
the <code>smart</code> dataset as the new samples, and predict their
overall survival probability from one year to ten years:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">x</span>, <span class="va">y</span>, newx <span class="op">=</span> <span class="va">x</span><span class="op">[</span><span class="fl">101</span><span class="op">:</span><span class="fl">105</span>, <span class="op">]</span>, pred.at <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span> <span class="op">*</span> <span class="fl">365</span><span class="op">)</span></span>
<span><span class="co">#&gt;            365       730      1095      1460      1825      2190      2555</span></span>
<span><span class="co">#&gt; [1,] 0.9477525 0.9204206 0.8884055 0.8573295 0.8171765 0.7840601 0.7427595</span></span>
<span><span class="co">#&gt; [2,] 0.9715008 0.9563035 0.9382349 0.9204068 0.8969238 0.8771525 0.8519471</span></span>
<span><span class="co">#&gt; [3,] 0.9786512 0.9672021 0.9535296 0.9399734 0.9220153 0.9068029 0.8872827</span></span>
<span><span class="co">#&gt; [4,] 0.8973088 0.8458249 0.7874714 0.7328425 0.6651912 0.6118826 0.5485474</span></span>
<span><span class="co">#&gt; [5,] 0.9736465 0.9595694 0.9428104 0.9262503 0.9044000 0.8859696 0.8624274</span></span>
<span><span class="co">#&gt;           2920      3285      3650</span></span>
<span><span class="co">#&gt; [1,] 0.7043892 0.6542044 0.6542044</span></span>
<span><span class="co">#&gt; [2,] 0.8279442 0.7956203 0.7956203</span></span>
<span><span class="co">#&gt; [3,] 0.8685571 0.8431207 0.8431207</span></span>
<span><span class="co">#&gt; [4,] 0.4928337 0.4245071 0.4245071</span></span>
<span><span class="co">#&gt; [5,] 0.8399589 0.8096226 0.8096226</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="customize-color-palette">Customize color palette<a class="anchor" aria-label="anchor" href="#customize-color-palette"></a>
</h2>
<p>The <code>hdnom</code> package has 4 unique built-in color palettes
available for all above plots, inspired by the colors commonly used by
scientific journals. Users can use the <code>col.pal</code> argument to
select the color palette. Possible values for this argument are listed
in the table below:</p>
<table style="width:88%;" class="table">
<colgroup>
<col width="18%">
<col width="69%">
</colgroup>
<thead><tr class="header">
<th>Value</th>
<th>Color palette inspiration</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>"JCO"</code></td>
<td><em>Journal of Clinical Oncology</em></td>
</tr>
<tr class="even">
<td><code>"Lancet"</code></td>
<td>Lancet journals, such as <em>Lancet Oncology</em>
</td>
</tr>
<tr class="odd">
<td><code>"NPG"</code></td>
<td>NPG journals, such as <em>Nature Reviews Cancer</em>
</td>
</tr>
<tr class="even">
<td><code>"AAAS"</code></td>
<td>AAAS Journals, such as <em>Science</em>
</td>
</tr>
</tbody>
</table>
<p>By default, <code>hdnom</code> will use the JCO color palette
(<code>col.pal = "JCO"</code>).</p>
</div>
<div class="section level2">
<h2 id="shiny-app">Shiny app<a class="anchor" aria-label="anchor" href="#shiny-app"></a>
</h2>
<p><a href="https://github.com/nanxstats/hdnom-app" class="external-link uri">https://github.com/nanxstats/hdnom-app</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nan Xiao, Qing-Song Xu, Miao-Zhu Li.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
